<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500">
  <defs>
    <!-- Radial gradients for chiaroscuro -->
    <radialGradient id="roomLight" cx="35%" cy="30%" r="80%">
      <stop offset="0%" stop-color="#f8f0df" />
      <stop offset="40%" stop-color="#d7c2a0" />
      <stop offset="100%" stop-color="#2a2116" />
    </radialGradient>

    <radialGradient id="panelGlow" cx="40%" cy="45%" r="30%">
      <stop offset="0%" stop-color="#f4f0e4" />
      <stop offset="60%" stop-color="#e0d1b0" />
      <stop offset="100%" stop-color="#7a6645" />
    </radialGradient>

    <!-- Light from window (approx sun 35° elev, 20° azimuth) -->
    <linearGradient id="windowLight" x1="0%" y1="0%" x2="80%" y2="100%">
      <stop offset="0%" stop-color="#fff9e6" stop-opacity="1" />
      <stop offset="60%" stop-color="#f4d9a0" stop-opacity="0.6" />
      <stop offset="100%" stop-color="#3b2b1b" stop-opacity="0" />
    </linearGradient>

    <!-- Wood grain pattern for oak workbench -->
    <pattern id="oakGrain" patternUnits="userSpaceOnUse" width="40" height="20">
      <rect x="0" y="0" width="40" height="20" fill="#7b5a34" />
      <path d="M0,5 C10,0 20,10 40,4" fill="none" stroke="#8f6a3c" stroke-width="1" opacity="0.6" />
      <path d="M0,14 C12,10 22,18 40,13" fill="none" stroke="#69482a" stroke-width="0.8" opacity="0.5" />
      <path d="M5,2 C9,5 10,8 13,9" fill="none" stroke="#5b3b22" stroke-width="0.7" opacity="0.5" />
    </pattern>

    <!-- Mask for worn edges on workbench -->
    <mask id="benchWear">
      <rect x="0" y="0" width="500" height="500" fill="black" />
      <rect x="40" y="320" width="320" height="70" fill="white" />
      <ellipse cx="60" cy="320" rx="25" ry="5" fill="white" />
      <ellipse cx="340" cy="320" rx="25" ry="5" fill="white" />
      <ellipse cx="200" cy="355" rx="140" ry="20" fill="white" />
      <ellipse cx="200" cy="355" rx="120" ry="18" fill="black" opacity="0.4" />
      <ellipse cx="120" cy="345" rx="18" ry="6" fill="black" opacity="0.5" />
      <ellipse cx="280" cy="348" rx="14" ry="5" fill="black" opacity="0.5" />
    </mask>

    <!-- Lighting filter for camera obscura projection -->
    <filter id="panelSpecular" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="1.5" result="blur" />
      <feSpecularLighting in="blur" surfaceScale="3" specularConstant="0.6" specularExponent="20" lighting-color="#ffffff" result="spec">
        <!-- Window position approximating sun direction (top-left) -->
        <fePointLight x="60" y="80" z="80" />
      </feSpecularLighting>
      <feComposite in="spec" in2="SourceGraphic" operator="in" result="lit" />
      <feMerge>
        <feMergeNode in="SourceGraphic" />
        <feMergeNode in="lit" />
      </feMerge>
    </filter>

    <!-- Cool highlight for metal compasses -->
    <filter id="metalCool">
      <feColorMatrix type="matrix" values="
        0.7 0   0   0   0.1
        0   0.8 0   0   0.1
        0   0   1.2 0   0.2
        0   0   0   1   0" />
    </filter>

    <!-- Quill nib marker -->
    <marker id="quillNib" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="5" markerHeight="5" orient="auto">
      <path d="M0,2 L8,5 L0,8 Z" fill="#3b2a18" />
    </marker>

    <!-- Spiral text path for mirror-script notes -->
    <path id="spiralPath" d="M260,210
      C270,205 280,205 290,210
      S310,225 320,235
      S335,255 335,270
      S325,295 305,305
      S280,315 265,310
      S245,295 245,280
      S255,255 270,245" />

    <!-- Cast shadows: general long shadow gradient -->
    <linearGradient id="shadowGrad" x1="0%" y1="0%" x2="80%" y2="80%">
      <stop offset="0%" stop-color="black" stop-opacity="0.35" />
      <stop offset="100%" stop-color="black" stop-opacity="0" />
    </linearGradient>
  </defs>

  <!-- Background room with chiaroscuro -->
  <rect x="0" y="0" width="500" height="500" fill="url(#roomLight)" />

  <!-- Window (light entry) -->
  <g id="window">
    <rect x="40" y="60" width="90" height="120" fill="#fdf7e5" stroke="#b0956a" stroke-width="2" />
    <line x1="85" y1="60" x2="85" y2="180" stroke="#b0956a" stroke-width="1" />
    <line x1="40" y1="120" x2="130" y2="120" stroke="#b0956a" stroke-width="1" />
    <!-- Beam of light -->
    <path d="M40,60 L130,60 L220,210 L100,240 Z" fill="url(#windowLight)" opacity="0.8" />
  </g>

  <!-- Workbench top using oak pattern and mask for wear -->
  <g id="workbench">
    <rect x="40" y="320" width="320" height="90" fill="#3a2718" />
    <rect x="40" y="320" width="320" height="70" fill="url(#oakGrain)" mask="url(#benchWear)" />
    <rect x="40" y="390" width="320" height="20" fill="#2a1b11" />
  </g>

  <!-- Camera obscura box -->
  <g id="cameraObscura">
    <!-- Simple trapezoid box aligned in loose perspective -->
    <polygon points="120,210 220,210 240,270 100,270" fill="#221813" stroke="#4a3a2b" stroke-width="1.5" />
    <!-- Aperture facing window -->
    <circle cx="135" cy="225" r="4" fill="#111" stroke="#666" stroke-width="0.5" />
    <!-- Inside dark -->
    <polygon points="120,210 220,210 220,260 120,260" fill="#120d0a" opacity="0.8" />
  </g>

  <!-- Poplar panel (scale 1px=1mm, 500x700 mm -> 250x350 px reduced to fit) -->
  <g id="panel" transform="translate(230,120) scale(0.5)">
    <!-- Panel wood -->
    <rect x="0" y="0" width="500" height="700" rx="6" ry="6"
          fill="url(#panelGlow)" stroke="#5e4a30" stroke-width="6" filter="url(#panelSpecular)" />
    <!-- Projected sunlit street (simplified) -->
    <!-- Horizon line at y=700 in original mm-space -> y=350 here, draw reference -->
    <line x1="-500" y1="350" x2="1000" y2="350" stroke="#c0a07c" stroke-width="1" opacity="0.4" />
    <!-- Simple two-point perspective buildings using given vanishing geometry (approximated) -->
    <polygon points="50,350 140,260 200,260 200,350" fill="#e8dfcf" stroke="#9b8a72" stroke-width="2" />
    <polygon points="200,350 200,260 320,260 420,350" fill="#d6c5aa" stroke="#8a7559" stroke-width="2" />
    <!-- Street -->
    <polygon points="140,350 200,350 260,700 80,700" fill="#b79f80" opacity="0.9" />
    <!-- Cast shadows on street consistent with left-top light -->
    <polygon points="80,350 140,350 120,390 60,390" fill="#3a2b1b" opacity="0.35" />
  </g>

  <!-- Apprentice (7.5 heads tall; simplified proportion) -->
  <!-- Height ~160 px, head ~21.3 px -->
  <g id="apprentice" transform="translate(320,210)">
    <!-- Shadow on floor toward lower-right -->
    <ellipse cx="-10" cy="140" rx="38" ry="14" fill="url(#shadowGrad)" opacity="0.8" />
    <!-- Legs -->
    <rect x="-6" y="80" width="10" height="55" fill="#3b2f26" />
    <rect x="6" y="80" width="10" height="55" fill="#3b2f26" />
    <!-- Tunic -->
    <rect x="-18" y="40" width="40" height="55" rx="4" ry="4" fill="#7f4c33" />
    <!-- Arms at waist (elbow at waist) -->
    <path d="M-18,70 C-35,75 -40,85 -42,95" fill="none" stroke="#e3c19b" stroke-width="5" stroke-linecap="round" />
    <path d="M22,70 C39,75 44,85 46,96" fill="none" stroke="#e3c19b" stroke-width="5" stroke-linecap="round" />
    <!-- Hands (~1/10 height) -->
    <circle cx="-43" cy="97" r="4" fill="#e3c19b" />
    <circle cx="47" cy="98" r="4" fill="#e3c19b" />
    <!-- Neck -->
    <rect x="-4" y="33" width="8" height="7" fill="#e3c19b" />
    <!-- Head -->
    <circle cx="0" cy="20" r="11" fill="#e3c19b" />
    <!-- Hair -->
    <path d="M-11,17 C-10,5 0,3 11,9 C11,15 10,22 8,25 C4,22 -4,22 -11,24 Z" fill="#3c2715" />
  </g>

  <!-- Metal compasses on bench -->
  <g id="compasses" transform="translate(150,330)" filter="url(#metalCool)">
    <!-- Shadow -->
    <polygon points="0,10 40,0 70,25 30,35" fill="url(#shadowGrad)" opacity="0.7" />
    <!-- Legs -->
    <line x1="10" y1="0" x2="5" y2="40" stroke="#cfd7df" stroke-width="3" stroke-linecap="round" />
    <line x1="10" y1="0" x2="35" y2="38" stroke="#aeb8c2" stroke-width="3" stroke-linecap="round" />
    <!-- Hinge -->
    <circle cx="10" cy="0" r="4" fill="#dfe8f0" stroke="#7e8890" stroke-width="1" />
  </g>

  <!-- Quill with marker-end nib -->
  <g id="quill" transform="translate(260,340)">
    <!-- Shadow -->
    <path d="M0,10 L80,-10" stroke="url(#shadowGrad)" stroke-width="6" stroke-linecap="round" opacity="0.6" />
    <!-- Shaft -->
    <line x1="0" y1="0" x2="80" y2="-20" stroke="#f1e0c2" stroke-width="3" marker-end="url(#quillNib)" />
    <!-- Feather -->
    <path d="M0,0 C-10,-20 -5,-40 10,-50 C25,-45 32,-30 30,-15 Z"
          fill="#e6d3b3" stroke="#c3a680" stroke-width="1" />
  </g>

  <!-- Paper with mirror-script spiral notes -->
  <g id="paperNotes" transform="translate(245,260) rotate(-6)">
    <!-- Paper -->
    <rect x="0" y="0" width="110" height="80" rx="2" ry="2"
          fill="#f5f0e5" stroke="#c7b79c" stroke-width="1" />
    <!-- Text following spiral path (mirror-script approximation) -->
    <text font-family="serif" font-size="5" fill="#3a2d1d">
      <textPath href="#spiralPath" startOffset="100%">
        .etnaigamrep eht fo siaduts ,amrecbo aremac
      </textPath>
    </text>
  </g>

  <!-- Ground/floor plane suggestion with cast shadows from panel and apprentice -->
  <g id="floorShadows">
    <polygon points="260,250 420,240 440,320 280,330" fill="url(#shadowGrad)" opacity="0.6" />
    <polygon points="310,310 350,305 365,340 320,345" fill="url(#shadowGrad)" opacity="0.7" />
  </g>
</svg>