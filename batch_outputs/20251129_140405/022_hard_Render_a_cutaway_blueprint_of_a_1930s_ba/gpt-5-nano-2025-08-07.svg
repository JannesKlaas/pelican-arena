<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" width="500" height="500" role="img" aria-label="1930s bathysphere blueprint cutaway with overlayed systems">
  <defs>
    <!-- Water background gradient -->
    <linearGradient id="waterGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#0b2d53"/>
      <stop offset="60%" stop-color="#083a68"/>
      <stop offset="100%" stop-color="#041a2a"/>
    </linearGradient>

    <!-- Glass viewport gradient (fused silica look) -->
    <radialGradient id="glassGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#e9f4ff" stop-opacity="0.95"/>
      <stop offset="100%" stop-color="#b9deff" stop-opacity="0.25"/>
    </radialGradient>

    <!-- Lamp glow gradient (2300K warm light) -->
    <linearGradient id="lampGrad" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#fff6cc"/>
      <stop offset="60%" stop-color="#ffd981"/>
      <stop offset="100%" stop-color="#ffd266"/>
    </linearGradient>

    <!-- Caustics: water caustics using turbulence + displacement -->
    <filter id="caustics" x="-40%" y="-40%" width="180%" height="180%">
      <feTurbulence type="fractalNoise" baseFrequency="0.03" numOctaves="2" seed="2" result="noise"/>
      <feDisplacementMap in="SourceGraphic" in2="noise" scale="12" xChannelSelector="R" yChannelSelector="G"/>
    </filter>

    <!-- Refraction/displacement to align with viewport curvature -->
    <filter id="refractionWin" x="-20%" y="-20%" width="140%" height="140%" filterUnits="userSpaceOnUse">
      <feTurbulence type="fractalNoise" baseFrequency="0.04" numOctaves="2" seed="7" result="noise"/>
      <feDisplacementMap in="SourceGraphic" in2="noise" scale="6" xChannelSelector="R" yChannelSelector="G"/>
    </filter>

    <!-- Condensation droplets: layered blur + morphology -->
    <filter id="condensation" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="0.6" result="blur"/>
      <feMorphology operator="dilate" radius="1" in="blur" result="dilated"/>
      <feComposite in="SourceGraphic" in2="dilated" operator="over"/>
    </filter>

    <!-- Specular lighting through window from diver's lamp -->
    <filter id="specWindow" x="-60%" y="-60%" width="220%" height="220%" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
      <feSpecularLighting surfaceScale="1" specularConstant="0.9" specularExponent="40" lighting-color="#fff7c0">
        <!-- FeSpotLight positioned to simulate lamp at 15° angle -->
        <feSpotLight x="320" y="-60" z="200" pointsAtX="0" pointsAtY="0" pointsAtZ="0" limitingConeAngle="25"/>
      </feSpecularLighting>
    </filter>

    <!-- Rivet symbol (240 uses will be generated by script) -->
    <symbol id="riv" viewBox="-4 -4 8 8">
      <circle cx="0" cy="0" r="1.6" fill="#d4b07a"/>
      <circle cx="0" cy="0" r="0.8" fill="#6b4a1d"/>
    </symbol>
  </defs>

  <!-- Backdrop water with caustics -->
  <rect width="500" height="500" fill="url(#waterGrad)" filter="url(#caustics)"/>

  <!-- External bioluminescent siphonophores (animated stroke-dasharray) -->
  <g id="siphonophores" stroke="#7ff0ff" stroke-width="2" fill="none" opacity="0.9">
    <path d="M 340 60 C 370 100, 420 140, 440 200" stroke-dasharray="4 6">
      <animate attributeName="stroke-dashoffset" values="0;12;0" dur="6s" repeatCount="indefinite"/>
    </path>
    <path d="M 360 90 C 400 130, 470 170, 480 230" stroke-dasharray="6 8">
      <animate attributeName="stroke-dashoffset" values="0;-8;0" dur="5s" repeatCount="indefinite"/>
    </path>
    <path d="M 290 50 C 260 110, 210 150, 180 210" stroke-dasharray="3 5">
      <animate attributeName="stroke-dashoffset" values="0;6;0" dur="7s" repeatCount="indefinite"/>
    </path>
  </g>

  <!-- Cutaway bathysphere (outer hull and walls) and viewport -->
  <g id="hull" transform="translate(250 250) scale(0.3333333333)">
    <!-- Pressure hull outer radius (1500 mm) and inner radius (1462 mm) with wall thickness ~6px visually due to scale -->
    <circle cx="0" cy="0" r="750" fill="none" stroke="#2f4a8a" stroke-width="2"/>
    <circle cx="0" cy="0" r="731" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>

    <!-- Fused-silica viewport window (300 mm diameter, 90 mm thick) as annulus -->
    <!-- Inner opening -->
    <circle cx="0" cy="0" r="75" fill="url(#glassGrad)" filter="url(#refractionWin)"/>
    <!-- Glass outer boundary (viewport annulus) -->
    <circle cx="0" cy="0" r="120" fill="none" stroke="rgba(180,210,255,0.9)" stroke-width="2" filter="url(#refractionWin)"/>

    <!-- Inner glass tint to suggest window through-wall with a subtle highlight -->
    <circle cx="0" cy="0" r="70" fill="rgba(180,210,255,0.25)" />

    <!-- Internal winch drum (OD 800 mm) at scale -> 800/2 mm pre-scale translates to 400 pre-scale; after hull scale -> 133px -->
    <g transform="translate(0,0)">
      <circle cx="0" cy="0" r="400" fill="none" stroke="#8a8a8a" stroke-width="2"/>
      <!-- Crank within drum area (approximate) -->
      <circle cx="0" cy="0" r="200" fill="none" stroke="#6f6f6f" stroke-width="1.5"/>
    </g>

    <!-- Internal gearing and linkage silhouette (stylized) -->
    <g>
      <line x1="-150" y1="60" x2="0" y2="0" stroke="#7a7a7a" stroke-width="2" />
      <line x1="150" y1="60" x2="0" y2="0" stroke="#7a7a7a" stroke-width="2" />
      <circle cx="0" cy="0" r="40" fill="none" stroke="#7a7a7a" stroke-width="2"/>
      <line x1="0" y1="0" x2="0" y2="-90" stroke="#7a7a7a" stroke-width="2" />
    </g>

    <!-- Gauge needle (60 mm) pivot at true center -->
    <line x1="0" y1="0" x2="0" y2="-30" stroke="#ff6a00" stroke-width="3" stroke-linecap="round">
      <animateTransform attributeName="transform" type="rotate" from="0" to="-60" dur="6s" repeatCount="indefinite" additive="sum"/>
    </line>

    <!-- Polar rivets around hull (240 uses generated by script) -->
    <!-- Rivet positions will be generated by JavaScript for precise polar placement -->
  </g>

  <!-- Textured condensation droplets overlay (layered blur) -->
  <g filter="url(#condensation)" opacity="0.95">
    <!-- random droplets along the viewport region to simulate surface condensation -->
    <ellipse cx="190" cy="180" rx="6" ry="4" fill="white" fill-opacity="0.25"/>
    <ellipse cx="210" cy="210" rx="5" ry="3" fill="white" fill-opacity="0.20"/>
    <ellipse cx="240" cy="160" rx="4" ry="3" fill="white" fill-opacity="0.22"/>
    <ellipse cx="260" cy="190" rx="6" ry="4" fill="white" fill-opacity="0.18"/>
    <ellipse cx="230" cy="210" rx="5" ry="3" fill="white" fill-opacity="0.20"/>
  </g>

  <!-- Text-on-path arcs annotating stresses (simple arc around hull) -->
  <path id="stressArc" d="M -220 0 A 220 220 0 0 1 220 0" fill="none" stroke="transparent"/>
  <text fill="#ffcc00" font-family="Arial" font-size="12" letter-spacing="0.5">
    <textPath href="#stressArc" startOffset="5%">HOLE-LOAD STRESS: 58 MPa</textPath>
  </text>

  <!-- Diver's lamp beam and glow (15°, 2300K) -->
  <g opacity="0.9">
    <!-- Lamp glow beam (stylized) -->
    <polygon points="-40,-260 20,-260 0,-230" fill="url(#lampGrad)" opacity="0.9"/>
    <!-- Lamp vignette slightly outside center oriented at ~15° -->
    <ellipse cx="-10" cy="-260" rx="40" ry="16" fill="rgba(255,245,180,0.18)"/>
  </g>

  <!-- Rivets around hull: generate 240 instances via script for precise polar placement -->
  <script><![CDATA[
    (function(){
      var svgNS = "http://www.w3.org/2000/svg";
      var xlinkNS = "http://www.w3.org/1999/xlink";
      var hullGroup = document.getElementById('hull');
      if(!hullGroup) return;
      var rivCount = 240;
      var radiusPre = 710; // pre-scale radius for rivets (within hull coordinates)
      var rivetTemplate = document.getElementById('riv');
      if(!rivetTemplate) return;

      // Create 240 rivets around a circle
      for(var i=0; i<rivCount; i++){
        var angle = (i / rivCount) * 2 * Math.PI;
        var x = Math.cos(angle) * radiusPre;
        var y = Math.sin(angle) * radiusPre;

        var useEl = document.createElementNS(svgNS, 'use');
        // reference rivet symbol
        useEl.setAttributeNS(xlinkNS, 'xlink:href', '#riv');
        // place rivet and orient to radial direction
        var deg = (angle * 180 / Math.PI);
        useEl.setAttribute('transform', 'translate('+x+','+y+') rotate('+deg+')');
        hullGroup.appendChild(useEl);
      }
    })();
  ]]></script>

  <!-- Overlay for specular highlight through viewport (applied to viewport) -->
  <circle cx="0" cy="0" r="75" fill="url(#glassGrad)" filter="url(#specWindow)" opacity="0.0"/>

</svg>